name: Deploy Live Docs

on:
  push:
    branches: [main, master]

permissions:
  contents: write

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          submodules: 'recursive' # Ensure SUSE styles are pulled

      - uses: astral-sh/setup-uv@v5

      - name: Build Unified Portal
        run: |
          uv sync --group dev
          uv run python -m spacy download en_core_web_sm
          # Run your custom engine to generate EVERYTHING into ./docs
          uv run python docs.py 
          
      - name: Deploy
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: docs
          branch: gh-pages